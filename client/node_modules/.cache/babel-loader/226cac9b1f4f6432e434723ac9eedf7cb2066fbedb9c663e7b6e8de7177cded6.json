{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\woori\\\\Desktop\\\\Memo-Jung\\\\coursing\\\\client\\\\src\\\\component\\\\titleSelect.js\",\n  _s = $RefreshSig$();\nimport React, { useContext } from \"react\";\nimport { AuthContext } from \"../context/AuthContext\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst TitleSelect = ({\n  setContentId\n}) => {\n  _s();\n  const dispatch = useDispatch();\n  const titles = useSelector(state => state.titles.titles);\n  const {\n    isAuthenticated,\n    userInfo,\n    loading\n  } = useContext(AuthContext);\n  const [initTitle, setInitTitle] = useState(\"일정을 선택해주세요\");\n  const [view, setView] = useState(false); //드롭다운 상태관리\n\n  const titleList = useMemo(() => {\n    //useEffect에 객체 전달로 인한 리랜더링 방지, user_content_title객체\n    if (isAuthenticated && userInfo) {\n      return titles.filter(title => title._user_id === userInfo[0].user_id);\n    }\n    return [];\n  }, [titles, isAuthenticated, userInfo]);\n  useEffect(() => {\n    if (titleList.length > 0) {\n      setInitTitle(titleList[0].user_content_title);\n    }\n  }, [titleList]);\n  useEffect(() => {\n    dispatch(fetchTitles());\n  }, [dispatch]);\n  const handlePlan = (user_content_title, user_content_id) => {\n    setInitTitle(user_content_title);\n    setContentId(user_content_id);\n  };\n  const drop = () => {\n    return titleList.map(tL => /*#__PURE__*/_jsxDEV(\"li\", {\n      className: \"title_li\",\n      onClick: () => handlePlan(tL.user_content_title, tL.user_content_id),\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        children: tL.user_content_title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 17\n      }, this)\n    }, tL.user_content_id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 13\n    }, this));\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 16\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"ul\", {\n    className: `banner_title ${view ? \"clicked\" : \"\"}`,\n    onClick: () => setView(!view),\n    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"down\",\n      children: \"\\u25BC\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 13\n    }, this), initTitle, view && drop()]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 9\n  }, this);\n};\n_s(TitleSelect, \"mRuIoA9/3xoF52bekx2YGiUEJwI=\", false, function () {\n  return [useDispatch, useSelector];\n});\n_c = TitleSelect;\nexport default TitleSelect;\nvar _c;\n$RefreshReg$(_c, \"TitleSelect\");","map":{"version":3,"names":["React","useContext","AuthContext","useDispatch","useSelector","jsxDEV","_jsxDEV","TitleSelect","setContentId","_s","dispatch","titles","state","isAuthenticated","userInfo","loading","initTitle","setInitTitle","useState","view","setView","titleList","useMemo","filter","title","_user_id","user_id","useEffect","length","user_content_title","fetchTitles","handlePlan","user_content_id","drop","map","tL","className","onClick","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/woori/Desktop/Memo-Jung/coursing/client/src/component/titleSelect.js"],"sourcesContent":["import React, { useContext } from \"react\";\r\nimport { AuthContext } from \"../context/AuthContext\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\n\r\nconst TitleSelect = ({setContentId}) => {\r\n    const dispatch = useDispatch();\r\n    const titles = useSelector((state) => state.titles.titles);\r\n    const { isAuthenticated, userInfo, loading } = useContext(AuthContext);\r\n    const [initTitle, setInitTitle] = useState(\"일정을 선택해주세요\");\r\n    const [view, setView] = useState(false);    //드롭다운 상태관리\r\n\r\n    const titleList = useMemo(() => {     //useEffect에 객체 전달로 인한 리랜더링 방지, user_content_title객체\r\n        if (isAuthenticated && userInfo) {\r\n            return titles.filter(title => title._user_id === userInfo[0].user_id);\r\n        }\r\n        return [];\r\n    }, [titles, isAuthenticated, userInfo]);\r\n\r\n    useEffect(() => {\r\n        if (titleList.length > 0) {\r\n            setInitTitle(titleList[0].user_content_title);\r\n        }\r\n    }, [titleList]);\r\n\r\n    useEffect(() => {\r\n        dispatch(fetchTitles());\r\n    }, [dispatch]);\r\n\r\n    const handlePlan = (user_content_title, user_content_id) => {\r\n        setInitTitle(user_content_title);\r\n        setContentId(user_content_id);\r\n    }\r\n\r\n    const drop = () => {\r\n        return titleList.map(tL => (\r\n            <li\r\n                className=\"title_li\"\r\n                key={tL.user_content_id}\r\n                onClick={() => handlePlan(tL.user_content_title, tL.user_content_id)}\r\n            >\r\n                <button>{tL.user_content_title}</button>\r\n            </li>\r\n        ))\r\n    }\r\n\r\n    if(loading){\r\n        return <div>Loading...</div>;\r\n    }\r\n\r\n    return (\r\n        <ul\r\n            className={`banner_title ${view ? \"clicked\" : \"\"}`}\r\n            onClick={() => setView(!view)}\r\n        >\r\n            <p className=\"down\">▼</p>\r\n            {initTitle}\r\n            {view && drop()}\r\n        </ul>\r\n    )\r\n}\r\n\r\nexport default TitleSelect;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}