{"ast":null,"code":"import axios from \"axios\";\nconst {\n  kakao\n} = window;\nconst fetchLocations = async lists => {\n  const api_key = process.env.REACT_APP_API_KEY;\n  const listsArray = Array.isArray(lists) ? lists : [lists];\n  const locationsPromises = listsArray.map(async list => {\n    if (list.address) {\n      try {\n        const encodedAddress = encodeURIComponent(list.address);\n        const loc_res = await axios({\n          method: \"GET\",\n          url: `https://dapi.kakao.com/v2/local/search/address.json?query=${encodedAddress}`,\n          headers: {\n            Authorization: `KakaoAK ${api_key}`\n          }\n        });\n        if (loc_res.data && loc_res.data.documents.length > 0) {\n          const document = loc_res.data.documents[0];\n          return {\n            latlng: new kakao.maps.LatLng(document.y, document.x),\n            name: document.road_address ? document.road_address.building_name : '',\n            title: list.user_content_title,\n            memo: list.content,\n            list_id: list.list_id,\n            cate_id: list.cate_img_src,\n            start_time: list.start_time,\n            end_time: list.end_time,\n            post_id: list.post_id,\n            address: list.address\n          };\n        }\n      } catch (error) {\n        console.error(\"위치 검색 오류:\", error);\n      }\n    }\n    return null;\n  });\n  const resolvedLocations = await Promise.all(locationsPromises);\n  const filteredLocations = resolvedLocations.filter(location => location !== null);\n  return filteredLocations;\n};\nexport default fetchLocations;","map":{"version":3,"names":["axios","kakao","window","fetchLocations","lists","api_key","process","env","REACT_APP_API_KEY","listsArray","Array","isArray","locationsPromises","map","list","address","encodedAddress","encodeURIComponent","loc_res","method","url","headers","Authorization","data","documents","length","document","latlng","maps","LatLng","y","x","name","road_address","building_name","title","user_content_title","memo","content","list_id","cate_id","cate_img_src","start_time","end_time","post_id","error","console","resolvedLocations","Promise","all","filteredLocations","filter","location"],"sources":["C:/Users/woori/Desktop/Memo-Jung/coursing/client/src/component/etc/fetchLoc.js"],"sourcesContent":["import axios from \"axios\";\r\n\r\nconst { kakao } = window;\r\n\r\nconst fetchLocations = async (lists) => {\r\n    const api_key = process.env.REACT_APP_API_KEY;\r\n\r\n    const listsArray = Array.isArray(lists) ? lists : [lists];\r\n    \r\n    const locationsPromises = listsArray.map(async (list) => {\r\n        if (list.address) {\r\n            try {\r\n                const encodedAddress = encodeURIComponent(list.address);\r\n                const loc_res = await axios({\r\n                    method: \"GET\",\r\n                    url: `https://dapi.kakao.com/v2/local/search/address.json?query=${encodedAddress}`,\r\n                    headers: {\r\n                        Authorization: `KakaoAK ${api_key}`,\r\n                    },\r\n                });\r\n\r\n                if (loc_res.data && loc_res.data.documents.length > 0) {\r\n                    const document = loc_res.data.documents[0];\r\n                    return { \r\n                        latlng: new kakao.maps.LatLng(document.y, document.x),\r\n                        name: document.road_address ? document.road_address.building_name : '',\r\n                        title: list.user_content_title,\r\n                        memo: list.content,\r\n                        list_id: list.list_id,\r\n                        cate_id: list.cate_img_src,\r\n                        start_time: list.start_time,\r\n                        end_time: list.end_time,\r\n                        post_id: list.post_id,\r\n                        address: list.address\r\n                    };\r\n                }\r\n            } catch (error) {\r\n                console.error(\"위치 검색 오류:\", error);\r\n            }\r\n        }\r\n        return null;\r\n    });\r\n\r\n    const resolvedLocations = await Promise.all(locationsPromises);\r\n    const filteredLocations = resolvedLocations.filter(location => location !== null);\r\n    \r\n    return filteredLocations;\r\n}\r\n\r\nexport default fetchLocations;"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,MAAM;EAAEC;AAAM,CAAC,GAAGC,MAAM;AAExB,MAAMC,cAAc,GAAG,MAAOC,KAAK,IAAK;EACpC,MAAMC,OAAO,GAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB;EAE7C,MAAMC,UAAU,GAAGC,KAAK,CAACC,OAAO,CAACP,KAAK,CAAC,GAAGA,KAAK,GAAG,CAACA,KAAK,CAAC;EAEzD,MAAMQ,iBAAiB,GAAGH,UAAU,CAACI,GAAG,CAAC,MAAOC,IAAI,IAAK;IACrD,IAAIA,IAAI,CAACC,OAAO,EAAE;MACd,IAAI;QACA,MAAMC,cAAc,GAAGC,kBAAkB,CAACH,IAAI,CAACC,OAAO,CAAC;QACvD,MAAMG,OAAO,GAAG,MAAMlB,KAAK,CAAC;UACxBmB,MAAM,EAAE,KAAK;UACbC,GAAG,EAAE,6DAA6DJ,cAAc,EAAE;UAClFK,OAAO,EAAE;YACLC,aAAa,EAAE,WAAWjB,OAAO;UACrC;QACJ,CAAC,CAAC;QAEF,IAAIa,OAAO,CAACK,IAAI,IAAIL,OAAO,CAACK,IAAI,CAACC,SAAS,CAACC,MAAM,GAAG,CAAC,EAAE;UACnD,MAAMC,QAAQ,GAAGR,OAAO,CAACK,IAAI,CAACC,SAAS,CAAC,CAAC,CAAC;UAC1C,OAAO;YACHG,MAAM,EAAE,IAAI1B,KAAK,CAAC2B,IAAI,CAACC,MAAM,CAACH,QAAQ,CAACI,CAAC,EAAEJ,QAAQ,CAACK,CAAC,CAAC;YACrDC,IAAI,EAAEN,QAAQ,CAACO,YAAY,GAAGP,QAAQ,CAACO,YAAY,CAACC,aAAa,GAAG,EAAE;YACtEC,KAAK,EAAErB,IAAI,CAACsB,kBAAkB;YAC9BC,IAAI,EAAEvB,IAAI,CAACwB,OAAO;YAClBC,OAAO,EAAEzB,IAAI,CAACyB,OAAO;YACrBC,OAAO,EAAE1B,IAAI,CAAC2B,YAAY;YAC1BC,UAAU,EAAE5B,IAAI,CAAC4B,UAAU;YAC3BC,QAAQ,EAAE7B,IAAI,CAAC6B,QAAQ;YACvBC,OAAO,EAAE9B,IAAI,CAAC8B,OAAO;YACrB7B,OAAO,EAAED,IAAI,CAACC;UAClB,CAAC;QACL;MACJ,CAAC,CAAC,OAAO8B,KAAK,EAAE;QACZC,OAAO,CAACD,KAAK,CAAC,WAAW,EAAEA,KAAK,CAAC;MACrC;IACJ;IACA,OAAO,IAAI;EACf,CAAC,CAAC;EAEF,MAAME,iBAAiB,GAAG,MAAMC,OAAO,CAACC,GAAG,CAACrC,iBAAiB,CAAC;EAC9D,MAAMsC,iBAAiB,GAAGH,iBAAiB,CAACI,MAAM,CAACC,QAAQ,IAAIA,QAAQ,KAAK,IAAI,CAAC;EAEjF,OAAOF,iBAAiB;AAC5B,CAAC;AAED,eAAe/C,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}